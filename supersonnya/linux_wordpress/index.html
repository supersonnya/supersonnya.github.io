<!DOCTYPE html>
<style>
    html {
        height: 100vh;
    }
    body {
        min-height: 100vh;
        display: grid;
        grid-template-rows: 1fr auto;
    }
    .footer {
        grid-row-start: 2;
        grid-row-end: 3;
    }
</style>
<html lang="zh-cn"><head>
  <meta charset="utf-8">
  <title>Sonnya</title>
  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" property="og:description" content="采用Nginx&#43;PHP&#43;MySQL&#43;Linux架构">
  <meta name="image" property="og:image" content="/">
  <meta name="author" content="SuperSonnya">
  <meta name="generator" content="Hugo 0.101.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.2.6/dist/css/uikit.min.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/css/style.min.css" integrity="" media="screen">
  
  <link rel="stylesheet" href="/css/syntax.min.css" integrity="" media="screen">
  
  <script src="https://cdn.jsdelivr.net/npm/mailgo@0.9.14/dist/mailgo.min.js" defer></script>

  <!--Favicon-->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  
  <link href="https://cdn.bootcss.com/font-awesome/5.8.2/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.min.js"></script>
  
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  
  <link rel="stylesheet" href="https://supersonnya.github.io/css/style-refractored.min.5eda6424eeb5869fa8bd4e5577365da4bf2d967864f5d24ebab356489da9a431.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css"/>
  
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/base-min.css">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-min.css">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css">
  
   
</head>
<body class="supersonnya">
    <div class="wrapper"><div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; bottom: #transparent-sticky-navbar">
    <nav class="uk-navbar-container uk-margin" uk-navbar="mode: click;" style="padding-right: 3rem">
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@s">
                
                <li><a style="font-size: 18px; text-transform: none" href="/"> Home
                        </a></li>

                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/frontend">Frontend</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/programlang">Programlang</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/operation">Operation</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/foreignlang">Foreignlang</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/records">Records</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/countdown">Countdown</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/dandan">Jessica</a></li>
                
                
                
                
                
                
                
                
                
                <li class="uk-active">
                    <a style="font-size: 18px; text-transform:none"
                        href="/supersonnya">Sonnya</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/moments">Moments</a></li>
                
                
                
                
                
                
                
                
                
                <li><a style="font-size: 18px; text-transform: none" href="/about">About</a></li>
                
                
            </ul>

            <a class="uk-navbar-toggle uk-hidden@s" uk-toggle="target: #sidenav" uk-navbar-toggle-icon href="#"></a>

        </div>
    </nav>
</div>

<div id="sidenav" uk-offcanvas="overlay: true">
    <div class="uk-offcanvas-bar uk-flex uk-flex-column">

        <ul class="uk-nav uk-nav-primary uk-nav-center uk-margin-auto-vertical">
            
            <li><a style="font-size: 18px" href="https://supersonnya.github.io/"> Home </a></li>

            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/frontend">Frontend</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/programlang">Programlang</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/operation">Operation</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/foreignlang">Foreignlang</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/records">Records</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/countdown">Countdown</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/dandan">Jessica</a></li>
            
            
            
            
            
            
            
            
            
            <li class="uk-active"><a style="font-size: 18px" href="/supersonnya">Sonnya</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/moments">Moments</a></li>
            
            
            
            
            
            
            
            
            
            <li><a style="font-size: 18px" href="/about">About</a></li>
            
            
        </ul>

    </div>
</div>



<section class="page-header blog-single-header">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h2>
          在Linux上部署WordPress环境
        </h2>
        <div class="post-meta">
          <ul>
            <li>
              <img src="https://supersonnya.github.io/images/avatar/author.png" alt="author-thumb" />
            </li>
            <li>
              <h5>
                SuperSonnya
              </h5>
            </li>
            <li>
              August 26, 2020
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="blog-single">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        <article class="blog-single-post">
          <h3 id="一源码安装nginx">一、源码安装Nginx</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># nginx官网下载nginx.tar.gz安装包</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装依赖</span>
</span></span><span style="display:flex;"><span>yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>openssl openssl-devel
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 解压</span>
</span></span><span style="display:flex;"><span>tar -zxvf nginx.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> nginx
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 配置</span>
</span></span><span style="display:flex;"><span>./configure <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>--prefix=/usr/local/nginx <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>--conf-path=/usr/local/nginx/conf/nginx.conf <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>--pid-path=/usr/local/nginx/conf/nginx.pid <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>--lock-path=/usr/local/nginx/lock/nginx.lock
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 编译</span>
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装</span>
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 启动</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> /usr/local/nginx/sbin/
</span></span><span style="display:flex;"><span>./nginx
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 查看进程</span>
</span></span><span style="display:flex;"><span>ps -ef | grep nginx
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 关闭防火墙</span>
</span></span><span style="display:flex;"><span>systemctl status firewalld
</span></span><span style="display:flex;"><span>systemctl stop firewalld.service
</span></span><span style="display:flex;"><span>systemctl disable firewalld.service
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> /usr/local/nginx/conf/
</span></span><span style="display:flex;"><span>vi nginx.conf <span style="color:#999;font-style:italic"># 更改server:listen端口号</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 重启</span>
</span></span><span style="display:flex;"><span>./nginx -s reload
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 停止</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 正常关闭</span>
</span></span><span style="display:flex;"><span>./nginx -s quit
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 强制关闭</span>
</span></span><span style="display:flex;"><span>./nginx -s stop
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 查看nginx版本</span>
</span></span><span style="display:flex;"><span>./nginx -V
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 网站代码路径</span>
</span></span><span style="display:flex;"><span>/usr/local/nginx/html/
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 设置开机启动</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">echo</span> <span style="color:#ed9d13">&#34;/usr/local/nginx/sbin/nginx&#34;</span> &gt;&gt; /etc/rc.d/rc.local
</span></span><span style="display:flex;"><span>chmod +x /etc/rc.d/rc.local
</span></span></code></pre></div><h3 id="二安装php">二、安装PHP</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 官网下载php.tar.gz</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 解压</span>
</span></span><span style="display:flex;"><span>tar -zxvf php.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> php
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 配置</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># ./confgure执行成功之后会在当前目录下留下config.nice 文件，后续可重新配置</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装pcntl扩展 ./config.nice --enable-pcntl</span>
</span></span><span style="display:flex;"><span>./configure --enable-fpm --prefix=/usr/local/php
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## Package requirements (sqlite3 &gt; 3.7.4) were not met:</span>
</span></span><span style="display:flex;"><span>yum install sqlite-devel
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 编译</span>
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装</span>
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 配置时没有指定php.ini的加载位置，默认在安装php安装目录的lib目录下，移动配置文件到</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># /usr/local/php/lib 目录下</span>
</span></span><span style="display:flex;"><span>cp php.ini-development /usr/local/php/lib/php.ini
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 在/usr/local/php/etc/php-fpm.conf 最后一行</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># include=/usr/local/php/etc/php-fpm.d/*.conf</span>
</span></span><span style="display:flex;"><span>cp /usr/local/php/etc/php-fpm.d/www.conf.default<span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span> /usr/local/php/etc/php-fpm.d/www.conf
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 文件不存在时，阻止Nginx将请求发送到后端的 PHP-FPM 模块，以避免遭受恶意脚本注入的攻击</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 将 php.ini 文件中的配置项cgi.fix_pathinfo 设置为 0</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 启动php-fpm</span>
</span></span><span style="display:flex;"><span>/usr/local/php/sbin/php-fpm
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 修改nginx配置以支持php应用</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## /usr/local/nginx/conf/nginx.conf</span>
</span></span><span style="display:flex;"><span>location / {
</span></span><span style="display:flex;"><span>    root   html;
</span></span><span style="display:flex;"><span>    index  index.php index.html index.htm;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 保证对于.php文件的请求将被传送到后端的PHP-FP 模块</span>
</span></span><span style="display:flex;"><span>location ~* <span style="color:#ed9d13">\.</span>php$ {
</span></span><span style="display:flex;"><span>    fastcgi_index   index.php;
</span></span><span style="display:flex;"><span>    fastcgi_pass    127.0.0.1:9000;
</span></span><span style="display:flex;"><span>    include         fastcgi_params;
</span></span><span style="display:flex;"><span>    fastcgi_param   SCRIPT_FILENAME    <span style="color:#40ffff">$document_root$fastcgi_script_name</span>;
</span></span><span style="display:flex;"><span>    fastcgi_param   SCRIPT_NAME        <span style="color:#40ffff">$fastcgi_script_name</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 重启nginx使配置生效</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## connect() failed (111: Connection refused) while connecting to upstream</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## php-fpm未启动</span>
</span></span></code></pre></div><h3 id="三安装mysql">三、安装MySQL</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 下载安装包</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 带boost版本的mysql-boost.tar.gz</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装工具</span>
</span></span><span style="display:flex;"><span>yum install cmake
</span></span><span style="display:flex;"><span>yum install ncurses ncurses-devel
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 解压</span>
</span></span><span style="display:flex;"><span>tar -zxvf mysql-boost.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> mysql/
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 配置</span>
</span></span><span style="display:flex;"><span>mkdir configure
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> configure
</span></span><span style="display:flex;"><span>cmake .. -DWITH_BOOST=../boost/boost_1_59_0/ -DWITH_EMBEDDED_SERVER=OFF
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 编译</span>
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装</span>
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 创建mysql用户组和用户</span>
</span></span><span style="display:flex;"><span>groupadd mysql
</span></span><span style="display:flex;"><span>useradd -g mysql mysql
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 设置权限,安装目录为 /usr/local/mysql</span>
</span></span><span style="display:flex;"><span>chown -R mysql:mysql /usr/local/mysql
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 初始化数据库</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> /usr/local/mysql/bin
</span></span><span style="display:flex;"><span>./mysqld --initialize --user=mysql
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># warning信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## TIMESTAMP with implicit DEFAULT value is deprecated</span>
</span></span><span style="display:flex;"><span>vim /etc/my.cnf
</span></span><span style="display:flex;"><span><span style="color:#40ffff">explicit_defaults_for_timestamp</span>=<span style="color:#24909d">true</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 将mysql加入系统服务</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> /usr/local/mysql/support-files
</span></span><span style="display:flex;"><span>cp mysql.server /etc/init.d/mysql
</span></span><span style="display:flex;"><span>chkconfig --add mysql <span style="color:#999;font-style:italic"># 加入系统服务</span>
</span></span><span style="display:flex;"><span>chkconfig mysql on <span style="color:#999;font-style:italic"># 开机启动</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 开启MySQL服务</span>
</span></span><span style="display:flex;"><span>service mysql start
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># Starting MySQL.2018-07-30T01:14:39.000931Z mysqld_safe error: log-error </span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## set to &#39;/var/log/mariadb/mariadb.log&#39;, however file don&#39;t exists. Create </span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## writable for user &#39;mysql&#39;. ERROR! The server quit without updating PID </span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## file (/var/lib/mysql/localhost.localdomain.pid).</span>
</span></span><span style="display:flex;"><span>mkdir /var/log/mariadb
</span></span><span style="display:flex;"><span>touch /var/log/mariadb/mariadb.log
</span></span><span style="display:flex;"><span>chown -R mysql:mysql /var/log/mariadb/mariadb.log
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## mysql -uroot -p 登录mysql未找到命令</span>
</span></span><span style="display:flex;"><span>ln -s /usr/local/mysql/bin/mysql /usr/local/bin
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## Can&#39;t connect to local MySQL server through socket /tmp/mysql.sock</span>
</span></span><span style="display:flex;"><span>find / -name <span style="color:#ed9d13">&#39;mysql.sock&#39;</span>
</span></span><span style="display:flex;"><span>more /etc/my.cnf
</span></span><span style="display:flex;"><span>ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock
</span></span></code></pre></div><h3 id="四安装php-mysql扩展">四、安装<code>PHP-MySQL</code>扩展</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 安装mysqli需要PHP源码包</span>
</span></span><span style="display:flex;"><span>/usr/local/bin/phpize
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 配置，需要指定php-config和mysql-config</span>
</span></span><span style="display:flex;"><span>./configure -with-php-config=/usr/local/bin/php-config <span style="color:#ed9d13">\
</span></span></span><span style="display:flex;"><span><span style="color:#ed9d13"></span>-with-pdo-mysql=mysqlnd
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息，找不到文件</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 直接打开报错文件，引用路径为绝对路径</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 编译安装</span>
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>make install
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 修改php.ini，去掉注释，并修改文件名</span>
</span></span><span style="display:flex;"><span>;<span style="color:#40ffff">extension</span>=php_pdo_mysqli 
</span></span><span style="display:flex;"><span><span style="color:#40ffff">extension</span>=pdo_mysqli.so
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 重启php-fpm</span>
</span></span><span style="display:flex;"><span>ps aux|grep php-fpm
</span></span><span style="display:flex;"><span><span style="color:#24909d">kill</span> -USR2 端口号
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## Cannot find autoconf. Please check your autoconf installation and the </span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## $PHP_AUTOCONF environment variable. Then, rerun this script.</span>
</span></span><span style="display:flex;"><span>yum install autoconf
</span></span></code></pre></div><h3 id="五部署wordpress">五、部署<code>WordPress</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># wordpress文件复制到nginx路径下</span>
</span></span><span style="display:flex;"><span>/usr/local/nginx/html/
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 打开localhost/wordpress开始配置</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 设置数据库，用户信息</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 1.Warning: mysqli::Can&#39;t connect to local MySQL server through socket.</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 使用localhost时，MySQL客户端库使用Unix域套接字进行连接而不是TCP/IP连接。</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">### 使用TCP/IP。连接时使用127.0.0.1代替localhost。但Unix套接字可能更快，更安全。</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">### 更改套接字php.ini：将mysqli.default_socket设为my.cnf里MySQL创建的套接字路径。</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 2.Fatal error: Uncaught Error: Call to undefined function gzinflate()</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## 源码编译php时没有带上zlib</span>
</span></span><span style="display:flex;"><span><span style="color:#24909d">cd</span> /usr/local/resources/php/ext/zlib/
</span></span><span style="display:flex;"><span>cp config0.m4 config.m4
</span></span><span style="display:flex;"><span>/usr/local/php7/bin/phpize
</span></span><span style="display:flex;"><span>./configure --with-php-config=/usr/local/php/bin/php-config --with-zlib
</span></span><span style="display:flex;"><span>make &amp;&amp; make install
</span></span><span style="display:flex;"><span>vi php.ini
</span></span><span style="display:flex;"><span><span style="color:#40ffff">extension</span>=zlib.so
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 重启php-fpm</span>
</span></span></code></pre></div><h3 id="六wordpress使用问题">六、<code>WordPress使用问题</code></h3>
<h4 id="1更新插件主题">1、更新插件主题</h4>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 添加代码</span>
</span></span><span style="display:flex;"><span>define(<span style="color:#ed9d13">&#39;FS_METHOD&#39;</span>, <span style="color:#ed9d13">&#39;direct&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 错误信息</span>
</span></span><span style="display:flex;"><span>no working transport found
</span></span><span style="display:flex;"><span>yum -y install libcurl-devel
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 重启php-fpm服务</span>
</span></span></code></pre></div><h4 id="2点击页面只显示首页">2、点击页面只显示首页</h4>
<ul>
<li>在设置里更改<code>固定链接</code>为<code>朴素</code>。</li>
</ul>

        </article>
      </div>
    </div>
  </div>
</section>

<!-- Themify -->
<link rel="stylesheet" href="https://supersonnya.github.io/themify/themify.css">

<!-- Critical CSS -->

<link href="https://supersonnya.github.io/scss/critical.min.css" rel="stylesheet" />


<link href="https://supersonnya.github.io/scss/non-critical.min.css" rel="stylesheet" />

<script src="https://supersonnya.github.io/js/vendor.min.js"></script>

<script src="https://supersonnya.github.io/js/script.min.js"></script>

    </div>
<footer class="footer">
  <div class="uk-container">
  <div class="footer-copyright uk-text-center" style="padding-bottom: 0.5rem">
  	<a href="https://supersonnya.github.io/" uk-icon="icon: home; ratio: 1.1">
      <span class="uk-text-muted">2020-2022@SuperSonnya</span>
    </a>   
  </div>
</footer>
<!-- JS Plugins -->

<script src="https://cdn.jsdelivr.net/npm/uikit@3.2.6/dist/js/uikit.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/uikit@3.2.6/dist/js/uikit-icons.min.js"></script>

</body>
</html>
